<!html>
<head>
  <title>The Keymaster</title>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
</head>
<body>
  <script src="keymaster.patch.js"></script>
  <script src="keymaster.js"></script>

  <h1>
    The Keymaster
  </h1>

  <input type="text" placeholder="a text input"/>
  <select><option></option><option>select</option></select>
  <textarea placeholder="a textarea"></textarea>

  <ol>
    <li>Press 'c'. Nothing should be logged on console.</li>
    <li>Press 'o' or Enter or Cursor &larr;. Console should log function call.</li>
    <li>Press 'i'. Switches scope to 'issues'.</li>
    <li>Press 'c'. Console should log function call.</li>
    <li>Press 'o' or Enter or Cursor &larr;. Console should log function call.</li>
  </ol>

  <p>
    At any time, try pressing ⌘+right, shift+left or ctrl+shift+alt+d.
  </p>
  
  <p>
    When a input, a select or a textarea element above is focused, key inputs should be ignored except 't' in textarea.
  </p>
  
  <p>More tests on target spec:</p>

  <ol>
    <li>Press 'i'. In the following textarea with or without 'issues' scope.</li>
    <li>Press 't'. It will only be activated in textarea elements.</li>
  </ol>

  <textarea placeholder="My ID is TextArea" id="TextArea"></textarea>


  <script>
    key('c', 'issues', function(){
     console.log('c/issues');
    });

    key('command+r, ctrl+r', 'issues', function(){
      console.log('Hijacked Command+R or Ctrl+R, damn!');
      return false;
    });
    
    key('i', function(){
      key.setScope('issues');
      console.log('Switched to "issues" scope. Command+R or Ctrl+R is now no longer reloading...');
    });
    
    key('i', function(){
      console.log('(example of multiple assignment)');
    });

    key('i', { id: "TextArea" }, function(){
      console.log('You pressed i in TextArea');
    });

    key('i', { id: "TextArea", scope: "issues" }, function(){
      key.setScope('issues');
      console.log('You pressed i in TextArea with "issues" scope');
    });

    key('t', { tagName: "TEXTAREA" }, function(){
      console.log('You pressed t in <textarea/>');
    });

    key('o, enter, left', function(){
      console.log('o, enter or left pressed!');
    });

    key('ctrl+c', function(){
      console.log('this is not the command line');
    });

    key('⌘+right,shift+left,ctrl+shift+alt+d', function(event){
      console.log('command+right, or shift+left, or ctrl+shift+alt+d');
      console.log('here is the event: ', event);
      console.log('key.control', key.control);
      console.log('key.ctrl', key.ctrl);
      console.log('key.shift', key.shift);
      console.log('key.alt', key.alt);
      console.log('key["⌘"]', key["⌘"]);
      return false; // prevent default && stop propagation
    });

    key('⌘+x, ctrl+x', function(event, handler){
      console.log(handler.shortcut, handler.scope);
      return false;
    });

    key(["g", "s"], function () {
      console.log("go -> settings");
    });

    key(["g", "s", "f"], function () {
      console.log("go -> settings -> fonts");
    })

    key(["ctrl+g,alt+g", "s"], function () {
      console.log("gogo -> settings");
    })
  </script>
</body>
</html>
